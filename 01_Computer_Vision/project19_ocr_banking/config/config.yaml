# OCR Banking Configuration

# Model Configuration
models:
  # Text Detection
  detection:
    type: "craft"  # craft, dbnet, east
    model_path: "models/detection/"
    confidence_threshold: 0.5
    link_threshold: 0.4
    text_threshold: 0.7
    low_text: 0.4
    poly: false
    cuda: true
  
  # Text Recognition
  recognition:
    type: "vietocr"  # vietocr, paddleocr, easyocr, trocr
    model_path: "models/recognition/"
    config: "vgg_transformer"
    device: "cuda"
    batch_size: 8
    
  # Alternative Recognition Models
  paddleocr:
    lang: "vi"
    use_angle_cls: true
    det: false
    rec: true
    
  trocr:
    model_name: "microsoft/trocr-base-handwritten"
    max_length: 128

# Document Types
document_types:
  cccd:
    name: "Căn cước công dân"
    fields:
      - id_number
      - full_name
      - date_of_birth
      - sex
      - nationality
      - place_of_origin
      - place_of_residence
      - issue_date
      - expiry_date
    
  cmnd:
    name: "Chứng minh nhân dân"
    fields:
      - id_number
      - full_name
      - date_of_birth
      - place_of_origin
      - place_of_residence
      - issue_date
  
  bank_statement:
    name: "Sao kê ngân hàng"
    fields:
      - account_number
      - account_holder
      - bank_name
      - statement_date
      - transactions
      - opening_balance
      - closing_balance
  
  loan_document:
    name: "Giấy tờ vay vốn"
    fields:
      - loan_number
      - borrower_name
      - loan_amount
      - interest_rate
      - loan_term
      - issue_date
      - signature_date

# Information Extraction Patterns
extraction_patterns:
  # ID Number patterns
  id_number:
    cccd: "\\d{12}"
    cmnd: "\\d{9}|\\d{12}"
  
  # Date patterns
  date:
    - "\\d{2}[/-]\\d{2}[/-]\\d{4}"
    - "\\d{2}[/-]\\d{2}[/-]\\d{2}"
    - "\\d{4}[/-]\\d{2}[/-]\\d{2}"
  
  # Money patterns
  money:
    - "\\d{1,3}(?:[.,]\\d{3})*(?:[.,]\\d{2})?"
    - "\\d+[.,]?\\d*\\s*(?:VND|VNĐ|đ|USD|\\$)"
  
  # Account number patterns
  account_number:
    - "\\d{10,16}"
    - "\\d{4}\\s*\\d{4}\\s*\\d{4}\\s*\\d{4}"
  
  # Name patterns (Vietnamese)
  vietnamese_name:
    - "[A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸĐ][a-zàáạảãâầấậẩẫăằắặẳẵèéẹẻẽêềếệểễìíịỉĩòóọỏõôồốộổỗơờớợởỡùúụủũưừứựửữỳýỵỷỹđ]+(?:\\s[A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸĐ][a-zàáạảãâầấậẩẫăằắặẳẵèéẹẻẽêềếệểễìíịỉĩòóọỏõôồốộổỗơờớợởỡùúụủũưừứựửữỳýỵỷỹđ]+)+"

# Field Keywords (for field detection)
field_keywords:
  full_name:
    vi: ["họ và tên", "họ tên", "tên", "name"]
    en: ["full name", "name"]
  
  id_number:
    vi: ["số", "số cmnd", "số cccd", "id", "số định danh"]
    en: ["id number", "id no", "identification number"]
  
  date_of_birth:
    vi: ["ngày sinh", "sinh ngày", "date of birth"]
    en: ["date of birth", "dob", "birth date"]
  
  account_number:
    vi: ["số tài khoản", "stk", "account number"]
    en: ["account number", "account no", "acc no"]
  
  amount:
    vi: ["số tiền", "thành tiền", "amount"]
    en: ["amount", "total", "sum"]

# Image Preprocessing
preprocessing:
  # Image enhancement
  resize:
    max_width: 1920
    max_height: 1920
  
  # Noise reduction
  denoise:
    enabled: true
    method: "bilateral"
  
  # Contrast enhancement
  enhance_contrast:
    enabled: true
    clip_limit: 2.0
    tile_grid_size: [8, 8]
  
  # Deskew
  deskew:
    enabled: true
    angle_threshold: 0.5

# API Configuration
api:
  host: "0.0.0.0"
  port: 8000
  reload: true
  workers: 4
  max_upload_size: 10485760  # 10MB
  allowed_extensions: [".jpg", ".jpeg", ".png", ".pdf"]

# Web Interface
web:
  title: "OCR Banking System"
  description: "Nhận diện và trích xuất thông tin từ giấy tờ ngân hàng"
  theme: "light"
  max_file_size: 10485760

# Logging
logging:
  level: "INFO"
  format: "{time:YYYY-MM-DD HH:mm:ss} | {level} | {message}"
  file: "logs/ocr_banking.log"
  rotation: "100 MB"

# Performance
performance:
  batch_processing: true
  max_batch_size: 16
  num_workers: 4
  use_gpu: true
  gpu_id: 0
